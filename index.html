<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片批量处理工具</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>图片批量处理工具</h1>
            <p>拖拽图片或文件夹到下方区域，自动调整宽度为 750px（等比例缩放），按原文件夹结构打包下载</p>
        </header>

        <!-- 拖拽区域 -->
        <div id="dropZone" class="drop-zone">
            <div class="drop-zone-content">
                <span class="drop-icon">📁</span>
                <p>拖拽图片或文件夹到此处</p>
                <p class="hint">支持 PNG、JPG、JPEG、WebP、AVIF 格式，支持多文件夹上传</p>
            </div>
        </div>

        <!-- 控制面板 -->
        <div class="control-panel">
            <div class="config-row">
                <div class="config-item">
                    <label for="zipName">ZIP 文件名：</label>
                    <input type="text" id="zipName" placeholder="默认使用时间戳">
                </div>
                <div class="config-item">
                    <label for="outputFormat">输出格式：</label>
                    <select id="outputFormat">
                        <option value="image/jpeg" selected>JPEG（支持压缩）</option>
                        <option value="image/png">PNG（无损，不支持压缩）</option>
                        <option value="image/webp">WebP（高压缩率）</option>
                        <option value="image/avif">AVIF（超高压缩率）</option>
                    </select>
                </div>
                <div class="config-item">
                    <label for="maxSizeKB">目标大小上限：</label>
                    <input type="number" id="maxSizeKB" value="800" min="100" max="5000" step="100">
                    <span class="unit">KB</span>
                </div>
            </div>
            <div class="buttons">
                <button id="processBtn" class="btn btn-primary" disabled>开始处理</button>
                <button id="downloadBtn" class="btn btn-success" disabled>下载 ZIP</button>
            </div>
        </div>

        <!-- 进度显示 -->
        <div id="progressSection" class="progress-section hidden">
            <div class="progress-info">
                <span id="progressText">处理中: 0/0</span>
            </div>
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
        </div>

        <!-- 图片预览列表 -->
        <div id="imageList" class="image-list"></div>
    </div>

    <script src="app.js" type="module"></script>
</body>
</html>
