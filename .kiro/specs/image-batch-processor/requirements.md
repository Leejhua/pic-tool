# 需求文档

## 简介

本地网页图片批量处理工具，支持拖拽导入多张图片，自动将图片处理为指定尺寸和大小，并输出到用户命名的文件夹中。

## 术语表

- **图片处理器 (Image Processor)**: 负责调整图片尺寸和压缩文件大小的核心组件
- **批量处理 (Batch Processing)**: 同时处理多张图片的操作
- **拖拽区域 (Drop Zone)**: 用户拖拽图片进行导入的界面区域
- **输出文件夹 (Output Folder)**: 用户指定的用于存放处理后图片的文件夹

## 需求

### 需求 1

**用户故事:** 作为用户，我希望能够批量拖拽导入图片，以便快速添加多张需要处理的图片。

#### 验收标准

1. WHEN 用户将一张或多张图片拖拽到拖拽区域 THEN 图片处理器 SHALL 接受并显示所有导入的图片预览
2. WHEN 用户拖拽非图片文件（非 png、jpg、jpeg 格式）THEN 图片处理器 SHALL 拒绝该文件并显示格式错误提示
3. WHEN 图片成功导入 THEN 图片处理器 SHALL 显示每张图片的文件名、原始尺寸和文件大小信息

### 需求 2

**用户故事:** 作为用户，我希望系统能自动判断图片是否需要处理，以便节省不必要的处理时间。

#### 验收标准

1. WHEN 原图宽度小于等于 750px 且高度小于等于 750px 且文件大小小于等于 800KB THEN 图片处理器 SHALL 标记该图片为"无需处理"并保持原样输出
2. WHEN 原图宽度大于 750px 或高度大于 750px 或文件大小大于 800KB THEN 图片处理器 SHALL 标记该图片为"需要处理"
3. WHEN 图片被标记为"需要处理" THEN 图片处理器 SHALL 在界面上显示该图片的处理状态

### 需求 3

**用户故事:** 作为用户，我希望图片能被自动调整到指定尺寸，以便满足我的使用需求。

#### 验收标准

1. WHEN 处理需要调整尺寸的图片 THEN 图片处理器 SHALL 将图片调整为宽度不超过 750px 且高度不超过 750px，同时保持原始宽高比
2. WHEN 图片宽高比与目标尺寸不同 THEN 图片处理器 SHALL 按比例缩放图片，确保宽度和高度都不超过 750px
3. WHEN 调整图片尺寸 THEN 图片处理器 SHALL 使用高质量的缩放算法以保持图片清晰度

### 需求 4

**用户故事:** 作为用户，我希望图片文件大小能被压缩到 800KB 以内，以便满足上传限制。

#### 验收标准

1. WHEN 处理后的图片文件大小超过 800KB THEN 图片处理器 SHALL 压缩图片质量直到文件大小小于等于 800KB
2. WHEN 压缩图片 THEN 图片处理器 SHALL 在满足大小限制的前提下尽可能保持最高图片质量
3. WHEN 图片无法在保持可接受质量的情况下压缩到 800KB 以内 THEN 图片处理器 SHALL 显示警告信息并输出最小可能的文件

### 需求 5

**用户故事:** 作为用户，我希望能够自定义输出文件夹名称，以便更好地组织处理后的图片。

#### 验收标准

1. WHEN 用户开始批量处理 THEN 图片处理器 SHALL 提供输入框让用户指定输出文件夹名称
2. WHEN 用户未指定文件夹名称 THEN 图片处理器 SHALL 使用默认名称（如当前时间戳）创建文件夹
3. WHEN 处理完成 THEN 图片处理器 SHALL 将所有处理后的图片打包到一个以用户指定名称命名的文件夹中供下载

### 需求 6

**用户故事:** 作为用户，我希望能够下载处理后的所有图片，以便保存到本地使用。

#### 验收标准

1. WHEN 所有图片处理完成 THEN 图片处理器 SHALL 提供下载按钮让用户下载包含所有处理后图片的 ZIP 文件
2. WHEN 用户点击下载按钮 THEN 图片处理器 SHALL 生成以用户指定文件夹名称命名的 ZIP 文件
3. WHEN 下载 ZIP 文件 THEN 图片处理器 SHALL 保持原始文件名和格式（png、jpg、jpeg）

### 需求 7

**用户故事:** 作为用户，我希望能够看到处理进度，以便了解当前处理状态。

#### 验收标准

1. WHEN 批量处理开始 THEN 图片处理器 SHALL 显示整体进度条和已处理/总数的计数
2. WHEN 单张图片处理完成 THEN 图片处理器 SHALL 更新该图片的状态为"已完成"并显示处理后的文件大小
3. WHEN 处理过程中发生错误 THEN 图片处理器 SHALL 显示错误信息并继续处理其他图片
